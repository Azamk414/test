(window.webpackJsonpminiapp=window.webpackJsonpminiapp||[]).push([[0],{238:function(e,t,n){e.exports=n(441)},345:function(e,t,n){},346:function(e,t,n){},348:function(e,t,n){},349:function(e,t,n){},368:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Text-Regular.85bd46c1.ttf"},369:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Text-Heavy.d7829d9b.otf"},370:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Text-Medium.9491854a.otf"},371:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Text-Semibold.8f079b59.otf"},372:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Text-Bold.5b6c7cdf.otf"},373:function(e,t,n){e.exports=n.p+"static/media/Manrope.2640802b.ttf"},374:function(e,t,n){e.exports=n.p+"static/media/Manrope-SemiBold.f85bb1cd.ttf"},375:function(e,t,n){e.exports=n.p+"static/media/Manrope-Medium.f661a805.ttf"},376:function(e,t,n){e.exports=n.p+"static/media/Manrope-Bold.850ffaa2.ttf"},377:function(e,t,n){e.exports=n.p+"static/media/Manrope-ExtraBold.6b0f2123.ttf"},378:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Display-Regular.aaeac71d.otf"},379:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Display-Bold.644563f4.otf"},380:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Display-Semibold.e6ef4ea3.otf"},381:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Display-Medium.51fd7406.otf"},382:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Display-Heavy.a545fc03.otf"},383:function(e,t,n){e.exports=n.p+"static/media/SF-Pro-Rounded-Regular.400bd9f8.ttf"},384:function(e,t,n){e.exports=n.p+"static/media/FontsFree-Net-SF-Pro-Rounded-Semibold.90721205.ttf"},385:function(e,t,n){e.exports=n.p+"static/media/FontsFree-Net-SF-Pro-Rounded-Bold.e64fc9d0.ttf"},386:function(e,t,n){e.exports=n.p+"static/media/FontsFree-Net-SF-Pro-Rounded-Black.9dbbd6b9.ttf"},387:function(e,t,n){e.exports=n.p+"static/media/FontsFree-Net-SF-Pro-Rounded-Heavy.8de22cfe.ttf"},388:function(e,t,n){e.exports=n.p+"static/media/SFUIDisplay-Regular.d4550c5e.otf"},389:function(e,t,n){e.exports=n.p+"static/media/SFUIText-Regular.888e0f3f.otf"},390:function(e,t,n){e.exports=n.p+"static/media/TTCommons-Regular.fc6fbc1a.ttf"},391:function(e,t,n){e.exports=n.p+"static/media/TTCommons-DemiBold.2e6a293a.ttf"},392:function(e,t,n){e.exports=n.p+"static/media/TTCommons-Bold.03428f67.ttf"},393:function(e,t,n){e.exports=n.p+"static/media/Stupid-Head.c7c4799e.ttf"},394:function(e,t,n){e.exports=n.p+"static/media/ProximaNova-Regular.1fc524a2.ttf"},395:function(e,t,n){e.exports=n.p+"static/media/ProximaNova-Bold.2b93e8e9.ttf"},396:function(e,t,n){e.exports=n.p+"static/media/ProximaNova-Semibold.3625e925.ttf"},397:function(e,t,n){e.exports=n.p+"static/media/Montserrat-Regular.ee653992.ttf"},398:function(e,t,n){e.exports=n.p+"static/media/Montserrat-SemiBold.c641dbee.ttf"},399:function(e,t,n){e.exports=n.p+"static/media/WC-Mano-Negra-Bta.d9521fb6.otf"},400:function(e,t,n){e.exports=n.p+"static/media/Roboto-Regular.11eabca2.ttf"},401:function(e,t,n){e.exports=n.p+"static/media/TTFirsNeue-Regular.0de1b0e6.ttf"},402:function(e,t,n){e.exports=n.p+"static/media/TTFirsNeue-Medium.df13f74f.ttf"},403:function(e,t,n){e.exports=n.p+"static/media/TTFirsNeue-DemiBold.44097099.ttf"},404:function(e,t,n){e.exports=n.p+"static/media/Gilroy-Regular.ae5e7255.ttf"},405:function(e,t,n){e.exports=n.p+"static/media/Gilroy-Bold.3cf0ee27.ttf"},406:function(e,t,n){e.exports=n.p+"static/media/Gilroy-Medium.6444f14a.ttf"},407:function(e,t,n){e.exports=n.p+"static/media/Gilroy-SemiBold.05bdf30b.ttf"},408:function(e,t,n){e.exports=n.p+"static/media/Inter-Regular.515cae74.ttf"},409:function(e,t,n){e.exports=n.p+"static/media/Inter-Medium.5ff1f2a9.ttf"},410:function(e,t,n){e.exports=n.p+"static/media/Inter-SemiBold.ec60b23f.ttf"},411:function(e,t,n){e.exports=n.p+"static/media/Inter-Bold.97decd2b.ttf"},412:function(e,t,n){e.exports=n.p+"static/media/Inter-Black.6385452a.ttf"},413:function(e,t,n){e.exports=n.p+"static/media/Inter-ExtraBold.bf2cf389.ttf"},414:function(e,t,n){e.exports=n.p+"static/media/Alice-Regular.c91fff83.ttf"},421:function(e,t,n){e.exports=n.p+"static/media/story.24d5353f.webp"},422:function(e,t,n){e.exports=n.p+"static/media/title.58d6a83c.svg"},423:function(e,t,n){e.exports=n.p+"static/media/text.a74be0fe.svg"},424:function(e,t,n){e.exports=n.p+"static/media/btn.3bec59ec.svg"},425:function(e,t,n){e.exports=n.p+"static/media/main.8f1b4663.webp"},426:function(e,t,n){e.exports=n.p+"static/media/title.cea016f2.svg"},427:function(e,t,n){e.exports=n.p+"static/media/text.af0b7565.svg"},428:function(e,t,n){e.exports=n.p+"static/media/btn.22d41b9c.svg"},429:function(e,t,n){e.exports=n.p+"static/media/analyze.11f87a84.webp"},430:function(e,t,n){e.exports=n.p+"static/media/title.ebee15f1.svg"},431:function(e,t,n){e.exports=n.p+"static/media/text.90fe2ccc.svg"},432:function(e,t,n){e.exports=n.p+"static/media/text2.3c0b2581.svg"},433:function(e,t,n){e.exports=n.p+"static/media/btn-top.1e902c5f.svg"},434:function(e,t,n){e.exports=n.p+"static/media/btn-story.15f87b12.svg"},435:function(e,t,n){e.exports=n.p+"static/media/result.10d2a1b2.webp"},436:function(e,t,n){e.exports=n.p+"static/media/title.471559cb.svg"},437:function(e,t,n){e.exports=n.p+"static/media/user-me.a97c2cb4.svg"},438:function(e,t,n){e.exports=n.p+"static/media/user.2e39712a.svg"},439:function(e,t,n){e.exports=n.p+"static/media/btn.7248572f.svg"},440:function(e,t,n){e.exports=n.p+"static/media/top.88669ce7.webp"},441:function(e,t,n){"use strict";n.r(t);n(239),n(273),n(275),n(277),n(279),n(280),n(281),n(282),n(283),n(284),n(287),n(288),n(290),n(291),n(292),n(293),n(294),n(295),n(297),n(298),n(299),n(300),n(301),n(302),n(305),n(306),n(307),n(308),n(309),n(311),n(313),n(315),n(317),n(318),n(319),n(320),n(321),n(322),n(324),n(326);var a=n(62),r=n(63),o=n(67),s=n(64),c=n(68),i=n(0),u=n.n(i),l=n(65),p=n.n(l),f=(n(335),n(336),n(10)),m=(n(345),n(346),n(6)),d=n.n(m),h=n(38),b=n(1),v=n.n(b),g=n(37),x=n(5),y=n(35),w=(n(348),n(349),n(136)),k=(n(47),n(90),n(129),n(34)),_=n.n(k);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){return j.apply(this,arguments)}function j(){return(j=Object(x.a)(v.a.mark((function e(t){var n,a,r,o,s=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},a=s.length>2&&void 0!==s[2]?s[2]:{},r=n?"?"+Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent("object"===typeof n[e]?JSON.stringify(n[e]):n[e])})).join("&"):"",o="".concat(t).concat(r),e.next=5,new Promise((function(e,t){_()(o,O({method:"GET"},a)).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(t){return e({error:{code:-1,text:t.message}})}))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=["SF Pro Text","SF Pro Text Heavy","SF Pro Text Semibold","SF Pro Display","SF Pro Display Bold","SF Pro Display Semibold","SF Pro Display Medium","SF Pro Rounded","SF Pro Rounded Semibold","SF Pro Rounded Bold","SF UI Display","SF UI Text","TT Commons","TT Commons Bold","TT Commons Demibold","Manrope ExtraBold","Manrope"];function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=!0,n=!1,a=void 0;try{for(var r,o=function(){var e=r.value,t=document.createElement("span");t.style.position="fixed",t.style.fontFamily=e,t.style.opacity="0",t.innerText="test",document.body.appendChild(t),t.onload=function(){return t.remove()}},s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)o()}catch(c){n=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}}function M(e,t,n,a,r){var o=this;try{if(t===n||n-t===1)e.innerHTML=n;else{var s=null;window.requestAnimationFrame((function c(i){s||(s=i);var u=Math.min((i-s)/a,1);e.innerHTML=Math.floor(u*(n-t)+t)+(r||""),u<1&&(window.requestAnimationFrame(c),o&&o.forceUpdate())}))}}catch(c){}}function F(e){return new Promise((function(t){return setTimeout(t,e)}))}function V(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("object"!==typeof t)return"".concat(e," ").concat(t);if(void 0!==e){var a=[];return a[e]||(a[e]=e%100>4&&e%100<20?2:[2,0,1,1,1,2][Math.min(e%10,5)]),(n?e+" ":"")+t[a[e]]}}function D(e){try{return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")}catch(t){return 0}}function T(e,t){return Math.floor(Math.random()*(t-e+1))+e}function N(){var e={},t=!0,n=!1,a=void 0;try{for(var r,o=new URLSearchParams(window.location.search)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,c=Object(w.a)(s,2),i=c[0],u=c[1];e[i]=u}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}function C(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.go,r=void 0===a?function(e){}:a,o=n.back,s=void 0===o?function(e){}:o;this.back=Object(x.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.state.popout||void 0===e.state.popout){t.next=4;break}return e.setState({popout:null}),window.history.pushState({pop:"popout"},"Title"),t.abrupt("return");case 4:if(1!==(n=e.state.history).length){t.next=10;break}s(!1),d.a.send("VKWebAppClose",{status:"success"}),t.next=15;break;case 10:if(!(n.length>1)){t.next=15;break}return n.pop(),s(n[n.length-1]),t.next=15,e.setState({activePanel:n[n.length-1],history:n,snackbar:null});case 15:case"end":return t.stop()}}),t)}))),this.go=function(t){var n=e.state.history;"object"===typeof t&&t.currentTarget&&(t=t.currentTarget.dataset.to),r(t),n[n.length-1]!==t&&(n.push(t),window.history.pushState({activePanel:t},"Title"),e.setState({activePanel:t,history:n,snackbar:null}))},this.setActiveModal=function(t){e.setState({activeModal:t})},this.setActivePanel=function(t,n){e.setState({activePanel:t,history:n?[].concat(Object(h.a)(n),[t]):[t]})},this.setPopout=function(t){e.setState({popout:t})},this.setSnackbar=function(){var t=Object(x.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.snackbar){t.next=5;break}return t.next=3,e.setState({snackbar:null});case 3:return t.next=5,F(100);case 5:e.setState({snackbar:u.a.createElement(f.h,{onClose:function(){return e.setState({snackbar:null})}},n)});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.setAlert=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[{title:"\u041e\u043a",autoclose:!0}];e.setPopout(u.a.createElement(f.b,{actions:a,actionsLayout:"vertical",onClose:function(){return e.setPopout(null)},header:t,text:n}))},this.state.history=[t],this.state.activePanel=t}function L(){return{activePanel:this.state.activePanel,onSwipeBack:this.back,history:this.state.history,popout:this.state.popout}}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=4,I=2,U=3,W="https://groups.adminbase.ru/api/",Z=W+"apps.get",K="https://proxy.adminbase.ru/",G=!1,z=0;function J(){return{2:{2:{0:23,1:24},1:{2:23,3:24}},3:{2:{0:23,1:29,2:30},1:{3:23,4:29,5:30}},4:{2:{0:16,1:20,2:29,3:30},1:{4:16,5:20,6:29,7:30}}}[B]}function Y(e,t){var n=J();if(0===e||0===t)return z;for(var a=n[e],r=Object.keys(a).map((function(e){return[e,a[e]]})),o=0;o<r.length;o++){var s=r[o];if(o===r.length-1)return parseInt(s[0]);if(parseInt(t)<=parseInt(s[1]))return parseInt(s[0])}return z}function q(e){return $.apply(this,arguments)}function $(){return($=Object(x.a)(v.a.mark((function e(t){var n,a,r,o,s,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},a=0,r=["groupsJoinUser","groupsMessageUser"];case 3:if(!(a<r.length)){e.next=28;break}o=r[a],n[o]=[],s=t[o],c=0;case 8:if(!(c<s.length)){e.next=25;break}return e.prev=9,e.next=12,d.a.send("VKWebAppGetGroupInfo",{group_id:s[c]});case 12:i=e.sent,n[o].push(i),e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(9),console.error(e.t0),c--,e.next=22,F(1e3);case 22:c++,e.next=8;break;case 25:a++,e.next=3;break;case 28:return e.abrupt("return",A({},t,{},n));case 29:case"end":return e.stop()}}),e,null,[[9,16]])})))).apply(this,arguments)}function Q(){return X.apply(this,arguments)}function X(){return(X=Object(x.a)(v.a.mark((function e(){var t,n,a,r,o,s,c,i,u,l,p,f,m,h,b,g,x,y,w,k,_,E,O,j,S,R,M=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]&&M[0],G=t,n=parseInt(N().vk_app_id||0),e.next=5,P(Z,{app_id:n});case 5:for((a=e.sent.response)||(a={app_id:n,group_id_join:new Array(B*U*2).fill(1),group_id_message:new Array(B*I*2).fill(1),save_photo_album:!0,need_panel_upload_photo:!0,tg_urls:[],is_show_tg:!1,categories_for_tg:[],category_group_default:0,album_name:"\ud83e\udd2a",album_caption:"\u0423\u0437\u043d\u0430\u0439 \u043a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b\u0435 \u0441\u0442\u0438\u043a\u0435\u0440\u044b - vk.com/app51535584#mark",need_upload_default_album_photo:!1,album_default_photo_url:"https://i.ibb.co/vDCcZsf/photo-2023-01-27-14-38-48.jpg"}),r=[],o=[],c=(s=a).category_group_default,i=s.is_show_tg,u=s.categories_for_tg,l=s.need_panel_upload_photo,p=s.need_upload_default_album_photo,f=s.album_default_photo_url,m=s.group_id_join,h=s.group_id_message,b=s.save_photo_album,g=s.tg_urls,z=c,x=0;x<m.length;x+=U)r.push(m.slice(x,x+U));for(y=0;y<h.length;y+=I)o.push(h.slice(y,y+I));return e.next=13,d.a.send("VKWebAppGetUserInfo");case 13:if(w=e.sent,k=w.sex,_=w.bdate,E=_&&3===_.split(".").length?(new Date).getFullYear()-parseInt(w.bdate.split(".")[2]):0,O=Y(k,E),j=r[O],S=o[O],R={groupsJoinCategory:r,groupsJoinUser:j,groupsMessageCategory:o,groupsMessageUser:S,vk_user:w,app:a,showGroupsCategory:O,savePhotoAlbum:b,need_upload_default_album_photo:p,album_default_photo_url:f,is_show_tg:i,categories_for_tg:u,need_panel_upload_photo:l,need_panel_sex_years:0===k||0===E,tg_urls:g,sex:k,years:E},!G){e.next=25;break}return e.next=24,q(R);case 24:R=e.sent;case 25:return console.debug(R),e.abrupt("return",R);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee={subscribe:0,messages:0},te={subscribe:[],messages:[]};function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(x.a)(v.a.mark((function e(){var t,n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.groupsMessageUser,a=ee[n="messages"],!(r="object"===typeof t[a]?t[a].id:t[a])){e.next=11;break}return e.prev=2,e.next=5,d.a.send("VKWebAppAllowMessagesFromGroup",{group_id:r});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),te[n].push(r);case 10:ee[n]++;case 11:case"end":return e.stop()}}),e,this,[[2,7]])})))).apply(this,arguments)}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.send("VKWebAppStorageGet",{keys:[t]});case 3:return e.abrupt("return",e.sent.keys[0].value);case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ie(e,t){return d.a.send("VKWebAppStorageSet",{key:e,value:t})}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(x.a)(v.a.mark((function e(t){var n,a,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,e.next=4,d.a.send("VKWebAppGetAuthToken",{app_id:parseInt(N().vk_app_id),scope:t});case 4:if(a=e.sent,!(t.includes(",")?a.scope.split(",").length===t.split(",").length:a.scope===t)){e.next=9;break}return e.abrupt("return",a.access_token);case 9:if(!n){e.next=15;break}return e.next=12,ue(t,n);case 12:return e.abrupt("return",e.sent);case 15:return e.abrupt("return",!1);case 16:e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(1),!n){e.next=26;break}return e.next=23,ue(t,n);case 23:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function pe(){return fe.apply(this,arguments)}function fe(){return(fe=Object(x.a)(v.a.mark((function e(){var t,n,a=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"",n=oe({v:"5.126"},n=a.length>1&&void 0!==a[1]?a[1]:{}),e.next=5,d.a.send("VKWebAppCallAPIMethod",{method:t,params:n});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;d.a.subscribe(function(){var n=Object(x.a)(v.a.mark((function n(a){var r,o,s,c,i;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a.detail,o=r.type,s=r.data,void 0!==o&&console.debug(o,s),"VKWebAppUpdateConfig"===o?(c=document.createAttribute("scheme"),i=s.scheme?"client_light"===s.scheme?"bright_light":s.scheme:"bright_light",c.value=t||i,document.body.attributes.setNamedItem(c),e[o]&&"function"===typeof e[o]&&e[o]()):e[o]&&"function"===typeof e[o]&&e[o]();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function de(e,t,n,a){return he.apply(this,arguments)}function he(){return(he=Object(x.a)(v.a.mark((function e(t,n,a,r){var o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.send("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",params:{v:"5.126",access_token:r}});case 2:o=e.sent.response.upload_url,(s=new FormData).append("photo",t,"image.png");try{_()(K+o,{method:"POST",body:s}).then((function(e){return e.json()})).then(function(){var e=Object(x.a)(v.a.mark((function e(t){var o,s,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.server,s=t.photo,c=t.hash,e.next=3,d.a.send("VKWebAppCallAPIMethod",{method:"photos.saveWallPhoto",params:{server:o,photo:s,hash:c,caption:n,v:"5.126",access_token:r}});case 3:i=e.sent.response[0],d.a.send("VKWebAppShowWallPostBox",{message:"",copyright:a,attachments:"photo".concat(i.owner_id,"_").concat(i.id)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(c){console.error(c)}case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e,t,n,a){return ve.apply(this,arguments)}function ve(){return(ve=Object(x.a)(v.a.mark((function e(t,n,a,r){var o,s,c,i,u,l,p,f=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=f.length>4&&void 0!==f[4]&&f[4],s=f.length>5&&void 0!==f[5]?f[5]:"perm_album",r){e.next=8;break}return e.next=5,ue("photos");case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",-1);case 8:if(e.t0=o,!e.t0){e.next=13;break}return e.next=12,se(s);case 12:e.t0=e.sent;case 13:if(""!==(i=e.t0)&&o){e.next=23;break}return e.next=17,d.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",params:{title:n,v:"5.126",access_token:r}});case 17:if(c=e.sent.response.id,!o){e.next=21;break}return e.next=21,ie(s,"".concat(c));case 21:e.next=24;break;case 23:c=parseInt(i);case 24:l=!1,p=0;case 26:if(!(p<1)){e.next=51;break}return e.prev=27,e.next=30,d.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",params:{album_id:c,v:"5.126",access_token:r}});case 30:u=e.sent.response.upload_url,e.next=48;break;case 33:if(e.prev=33,e.t1=e.catch(27),l){e.next=46;break}return l=!0,p--,e.next=40,d.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",params:{title:n,v:"5.126",access_token:r}});case 40:if(c=e.sent.response.id,!o){e.next=44;break}return e.next=44,ie(s,"".concat(c));case 44:e.next=48;break;case 46:return console.error(e.t1),e.abrupt("return",-2);case 48:p++,e.next=26;break;case 51:return t instanceof Blob&&(t=[t]),e.next=54,new Promise(function(){var e=Object(x.a)(v.a.mark((function e(n){var o,s,i,l,p,f,m,h,b,g,x,y,w,k;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=!0,s=!1,i=void 0,e.prev=3,l=t[Symbol.iterator]();case 5:if(o=(p=l.next()).done){e.next=41;break}f=p.value,(m=new FormData).append("photo",f,"image.png"),h=0,b=0;case 11:if(!(b<1)){e.next=38;break}return e.prev=12,h++,e.next=16,_()(K+u,{method:"POST",body:m}).then((function(e){return e.json()}));case 16:return g=e.sent,x=g.server,y=g.photos_list,w=g.hash,e.next=20,d.a.send("VKWebAppCallAPIMethod",{method:"photos.save",params:{album_id:c,server:x,photos_list:y,hash:w,caption:a,v:"5.126",access_token:r}});case 20:if(!(k=e.sent).error){e.next=23;break}throw new Error(JSON.stringify(k));case 23:e.next=35;break;case 25:if(e.prev=25,e.t0=e.catch(12),!(h>=10)){e.next=32;break}console.error(e.t0),n(-4),e.next=35;break;case 32:return b--,e.next=35,F(400);case 35:b++,e.next=11;break;case 38:o=!0,e.next=5;break;case 41:e.next=47;break;case 43:e.prev=43,e.t1=e.catch(3),s=!0,i=e.t1;case 47:e.prev=47,e.prev=48,o||null==l.return||l.return();case 50:if(e.prev=50,!s){e.next=53;break}throw i;case 53:return e.finish(50);case 54:return e.finish(47);case 55:n(c);case 56:case"end":return e.stop()}}),e,null,[[3,43,47,55],[12,25],[48,,50,54]])})));return function(t){return e.apply(this,arguments)}}());case 54:return e.abrupt("return",e.sent);case 55:case"end":return e.stop()}}),e,null,[[27,33]])})))).apply(this,arguments)}var ge="https://app-stat.special-backend.ru/method/";function xe(){return ye.apply(this,arguments)}function ye(){return(ye=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(ge+"apps.entry",N());case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function we(){return ke.apply(this,arguments)}function ke(){return(ke=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(ge+"apps.story",N());case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function _e(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(ge+"apps.result",N());case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Oe(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(ge+"apps.album",N());case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Re=u.a.createElement("g",{clipPath:"url(#clip0_412_565)"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 167L14.1811 167L89.1812 91.9999L375 91.9999L375 47.9999L36 48L-1.04033e-05 48L0 167Z",fill:"#86CDFF"}),u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 81L4.7925 81L37.7921 48.0004L375 48.0004L375 0.000440239L133 0.000461395L133 3.63156e-06L120.395 4.73351e-06L120.396 0.000462497L85.792 0.000465522L85.7925 7.75857e-06L-7.08124e-06 1.52588e-05L0 81Z",fill:"white"})),Me=u.a.createElement("defs",null,u.a.createElement("clipPath",{id:"clip0_412_565"},u.a.createElement("rect",{width:375,height:167,fill:"white"}))),Fe=function(e){var t=e.svgRef,n=e.title,a=Se(e,["svgRef","title"]);return u.a.createElement("svg",je({preserveAspectRatio:"none",width:375,height:167,viewBox:"0 0 375 167",fill:"none",ref:t},a),n?u.a.createElement("title",null,n):null,Re,Me)},Ve=u.a.forwardRef((function(e,t){return u.a.createElement(Fe,je({svgRef:t},e))}));n.p;function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Te(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ne=u.a.createElement("g",{clipPath:"url(#clip0_412_180)"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0H192.842L212.842 20H375V208H226H26H0V0Z",fill:"#000A17"})),Ce=u.a.createElement("defs",null,u.a.createElement("clipPath",{id:"clip0_412_180"},u.a.createElement("rect",{width:375,height:208,fill:"white"}))),Le=function(e){var t=e.svgRef,n=e.title,a=Te(e,["svgRef","title"]);return u.a.createElement("svg",De({preserveAspectRatio:"none",width:375,height:208,viewBox:"0 0 375 208",fill:"none",ref:t},a),n?u.a.createElement("title",null,n):null,Ne,Ce)},He=u.a.forwardRef((function(e,t){return u.a.createElement(Le,De({svgRef:t},e))}));n.p;function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ie=u.a.createElement("path",{d:"M13.7608 31.5H21.2392C21.6533 31.5 21.9917 31.1617 21.9917 30.7475V4.2525C21.9917 3.83833 21.6533 3.5 21.2392 3.5H13.7608C13.3467 3.5 13.0083 3.83833 13.0083 4.2525V30.7475C13.0083 31.1617 13.3467 31.5 13.7608 31.5ZM31.5 13.1308C31.5 12.7167 31.1617 12.3783 30.7475 12.3783H23.9108C23.4967 12.3783 23.1583 12.7167 23.1583 13.1308V30.7475C23.1583 31.1617 23.4967 31.5 23.9108 31.5H30.7475C31.1617 31.5 31.5 31.1617 31.5 30.7475V13.1308ZM4.2525 31.5H11.0892C11.5033 31.5 11.8417 31.1617 11.8417 30.7475V18.2C11.8417 17.7858 11.5033 17.4475 11.0892 17.4475H4.2525C3.83833 17.4475 3.5 17.7858 3.5 18.2V30.7475C3.5 31.1617 3.83833 31.5 4.2525 31.5Z",fill:"#3B9EE4"}),Ue=function(e){var t=e.svgRef,n=e.title,a=Be(e,["svgRef","title"]);return u.a.createElement("svg",Ae({width:35,height:35,viewBox:"0 0 35 35",fill:"none",ref:t},a),n?u.a.createElement("title",null,n):null,Ie)},We=u.a.forwardRef((function(e,t){return u.a.createElement(Ue,Ae({svgRef:t},e))})),Ze=(n.p,n(135)),Ke=n.n(Ze);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(n,!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e){var t=e.percent,n=6+Math.round(3.13*t);return u.a.createElement("svg",{width:"319",height:"27",viewBox:"0 0 319 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},u.a.createElement("g",{clipPath:"url(#clip0_412_810)"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M283 27H308.788L318.79 16.998V0H272.509L265.509 7H6.10352e-05V27H252H283Z",fill:"#D6D6D6"}),u.a.createElement("mask",{id:"mask0_412_810",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"319",height:"27"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M283 27H308.788L318.79 16.998V0H272.509L265.509 7H6.10352e-05V27H252H283Z",fill:"white"})),u.a.createElement("g",{mask:"url(#mask0_412_810)"},u.a.createElement("rect",{height:"36",fill:"#3B9EE4",style:{transition:"all 100ms ease-in-out",width:n}}),u.a.createElement("mask",{id:"path-4-inside-1_412_810",fill:"white"},u.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M283 27H308.788L319 16.7875V0H272.508L265.508 7H2V27H252H283Z"})),u.a.createElement("path",{d:"M308.788 27L311.616 29.8284L310.444 31H308.788V27ZM319 16.7875H323V18.4444L321.828 19.6159L319 16.7875ZM319 0V-4H323V0H319ZM272.508 0L269.68 -2.82843L270.852 -4H272.508V0ZM265.508 7L268.337 9.82843L267.165 11H265.508V7ZM2 7H-2V3H2V7ZM2 27V31H-2V27H2ZM308.788 31H283V23H308.788V31ZM321.828 19.6159L311.616 29.8284L305.959 24.1716L316.172 13.9591L321.828 19.6159ZM323 0V16.7875H315V0H323ZM272.508 -4H319V4H272.508V-4ZM262.68 4.17157L269.68 -2.82843L275.337 2.82843L268.337 9.82843L262.68 4.17157ZM265.508 11H2V3H265.508V11ZM6 7V27H-2V7H6ZM2 23H252V31H2V23ZM252 23H283V31H252V23Z",fill:"white",mask:"url(#path-4-inside-1_412_810)"}))),u.a.createElement("defs",null,u.a.createElement("clipPath",{id:"clip0_412_810"},u.a.createElement("rect",{width:"318.789",height:"27",fill:"white"}))))}function Ye(e){var t=e.values,n=2*Math.PI*19.5,a=n*(t[0]/100),r=n-a;return u.a.createElement("svg",{width:"69",height:"69",viewBox:"0 0 69 69",xmlns:"http://www.w3.org/2000/svg",id:"circle-diagram"},u.a.createElement("circle",{cx:"34.5",cy:"34.5",r:"19.5",fill:"none",stroke:"#3B9EE4",strokeWidth:"21",strokeDasharray:"".concat(a," ").concat(r),strokeLinecap:"butt",transform:"rotate(-180 34.5 34.5)"}),u.a.createElement("circle",{cx:"34.5",cy:"34.5",r:"19.5",fill:"none",stroke:"#FF5186",strokeWidth:"21",strokeDasharray:"".concat(r," ").concat(a),strokeLinecap:"butt",transform:"rotate(".concat(3.6*t[0]-180," 34.5 34.5)")}))}var qe=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={user_save_photo_album:!0,analyze:!0,regDate:Date.now()-864e6,maxViews:12565,friends_data:{woman:29,men:71}},C.bind(Object(y.a)(n))("main"),n.getStoryCanvas=n.getStoryCanvas.bind(Object(y.a)(n)),n.shareStory=n.shareStory.bind(Object(y.a)(n)),n.shareAlbum=n.shareAlbum.bind(Object(y.a)(n)),n.goResult=n.goResult.bind(Object(y.a)(n)),n.goTop=n.goTop.bind(Object(y.a)(n)),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me({},"bright_light"),this.changeStatusBarColor(),e.next=4,Q();case 4:return t=e.sent,e.next=7,this.setState(ze({},t));case 7:return e.next=9,d.a.send("VKWebAppInit");case 9:return this.setPopout(u.a.createElement(f.g,null)),e.next=12,R(["PP Neue Machina Ultrabold"]);case 12:this.setPopout(null),xe();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeStatusBarColor",value:function(){d.a.supports("VKWebAppSetViewSettings")&&d.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#FFFFFF"})}},{key:"getStoryCanvas",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t,a,r,o,s,c,i,u,l,p,f,m,d,h,b,g,x,y;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.regDate,r=t.maxViews,o=t.friends_data,s=n(47),c=s.createCanvas,i=s.loadImage,u=c(1080,1920),l=u.getContext("2d"),e.next=11,i(n(421));case 11:return p=e.sent,l.drawImage(p,0,0,1080,1920),l.textAlign="left",l.fillStyle="#86CDFF",l.font="54px PP Neue Machina Ultrabold",l.fillText("\u0421 ".concat(new Date(a).toLocaleDateString("ru-RU",{day:"numeric",month:"numeric",year:"numeric"})," \u041f\u041e ").concat((new Date).toLocaleDateString("ru-RU",{day:"numeric",month:"numeric",year:"numeric"})),109,854),l.fillStyle="#FFFFFF",l.font="75px PP Neue Machina Ultrabold",l.fillText(D(r),358.8,1058),l.fillStyle="#000A17",l.font="75px PP Neue Machina Ultrabold",l.fillText("".concat(o.men,"%"),320.12,1364.92),l.fillText("".concat(o.woman,"%"),575.12,1364.92),f=o.men,m=2*Math.PI*19.5,h=m-(d=m*(f/100)),b="<svg width='69' height='69' viewBox='0 0 69 69' xmlns='http://www.w3.org/2000/svg' id='circle-diagram'>\n                <circle cx='34.5' cy='34.5' r='19.5' fill='none' stroke='#3B9EE4' stroke-width='21'\n                        stroke-dasharray='".concat(d," ").concat(h,"' stroke-linecap='butt'\n                        transform='rotate(-180 34.5 34.5)'/>\n                <circle cx='34.5' cy='34.5' r='19.5' fill='none' stroke='#FF5186' stroke-width='21'\n                        stroke-dasharray='").concat(h," ").concat(d,"' stroke-linecap='butt'\n                        transform='rotate(").concat(3.6*f-180," 34.5 34.5)'/>\n            </svg>"),g=new Blob([b],{type:"image/svg+xml;charset=utf-8"}),x=URL.createObjectURL(g),y=new Image,setTimeout((function(){return y.src=x}),1),e.next=35,new Promise((function(e){return y.onload=e}));case 35:return URL.revokeObjectURL(x),l.drawImage(y,70,1265,200,200),e.abrupt("return",u);case 38:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shareStory",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setPopout(u.a.createElement(f.g,null)),e.next=4,this.getStoryCanvas();case 4:return t=e.sent,this.setPopout(null),e.next=8,d.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:t.toDataURL("image/png"),attachment:{text:"go_to",type:"url",url:"https://vk.com/app".concat(N().vk_app_id)}});case 8:we(),this.state.token&&t.toBlob(function(){var e=Object(x.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.app,n.album_name,a=n.album_caption,e.next=3,de(t,a,"https://vk.com/app".concat(N().vk_app_id),this.state.token);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"shareAlbum",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t,n,a,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getStoryCanvas();case 2:return t=e.sent,e.next=5,new Promise((function(e){return t.toBlob((function(t){return e(t)}))}));case 5:return n=e.sent,a=this.state.app,r=a.album_name,o=a.album_caption,e.prev=7,e.next=10,be(n,r,o,this.state.token);case 10:e.sent>=0&&Oe(),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(7);case 16:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"analyze",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t,n,a,r,o,s,c,i,u,l,p,f=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),n=this.state.token,M.bind(this)(this.percentRef,0,10,2e3,"%"),e.prev=3,e.next=6,_()("https://groups.adminbase.ru/api/users.getRegDate?user_id=".concat(this.state.vk_user.id)).then((function(e){return e.json()}));case 6:if(!(a=e.sent).response){e.next=48;break}return r=Ke.a.parse(a.response,{attrNodeName:"attr",textNodeName:"#text",ignoreAttributes:!1})["rdf:RDF"]["foaf:Person"],o=r["ya:created"].attr["@_dc:date"],this.setState({regDate:o}),M.bind(this)(this.percentRef,10,90,3e3,"%"),e.next=13,pe("wall.get",{count:100,access_token:n});case 13:return s=e.sent,e.next=16,pe("friends.get",{count:5e3,fields:"sex",access_token:n});case 16:if(c=e.sent,!s||!s.response){e.next=45;break}return i=s.response.items.length>0?Math.max.apply(Math,Object(h.a)(s.response.items.map((function(e){return e.views?e.views.count:0})))):c&&c.response&&c.response.count>0?2*c.response.count:T(0,1e3),(u=(new Date).getFullYear()-new Date(o).getFullYear())>1?i*=Math.floor(u/2):1===u&&(i*=2),e.prev=21,e.next=24,P("https://vk-guest.special-backend.ru/method/users.saveTop",ze({},N(),{guests:i}));case 24:if(!e.sent.response){e.next=29;break}console.log("Result saved"),e.next=30;break;case 29:throw new Error("Response false");case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),console.error("ERROR SAVE RESULT",e.t0);case 35:return l={woman:0,men:0},c&&c.response&&c.response.count>0?(c.response.items.forEach((function(e){l[1===e.sex?"woman":"men"]++})),l.woman=Math.round(100/c.response.count*l.woman),l.men=100-l.woman):(l.woman=T(0,100),l.men=100-l.woman),e.next=39,this.setState({maxViews:i,friends_data:l});case 39:console.log({maxViews:i,friends_data:l}),(this.state.user_save_photo_album||this.state.savePhotoAlbum)&&this.shareAlbum(),p=function(){var e=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.bind(f)(f.percentRef,90,100,100,"%"),f.setState({analyze:!1});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Date.now()-t<5e3?setTimeout(p,5e3-(Date.now()-t)+100):p(),e.next=46;break;case 45:throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u0438 \u043d\u0430 \u0441\u0442\u0435\u043d\u0435");case 46:e.next=49;break;case 48:throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u0442\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438");case 49:e.next=56;break;case 51:e.prev=51,e.t1=e.catch(3),console.error(e.t1),this.back(),this.setSnackbar(e.t1.message.includes("\u041e\u0448\u0438\u0431\u043a\u0430:")?e.t1.message:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435. (".concat(e.t1.message,")"));case 56:case"end":return e.stop()}}),e,this,[[3,51],[21,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"goResult",value:function(){var e=Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.bind(this)();case 2:return e.next=4,ne.bind(this)();case 4:this.go("result"),_e();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"goTop",value:function(){var e=Object(x.a)(v.a.mark((function e(){var t,n,a,r,o,s,c,i,l,p,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setPopout(u.a.createElement(f.g,null)),e.prev=1,e.next=4,P("https://vk-guest.special-backend.ru/method/users.getTop",N());case 4:if(!(t=e.sent).response){e.next=41;break}return n=t.response.users.map((function(e){return e[0]})).join(","),e.next=9,pe("users.get",{access_token:this.state.token,user_ids:n,fields:"photo_100"});case 9:for(a=e.sent,r={},o=!0,s=!1,c=void 0,e.prev=14,i=a.response[Symbol.iterator]();!(o=(l=i.next()).done);o=!0)p=l.value,r[p.id]=p;e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,c=e.t0;case 22:e.prev=22,e.prev=23,o||null==i.return||i.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return m=t.response.current,e.next=33,this.setState({top:{users_sort:t.response.users,users_data:r,current:m}});case 33:return e.next=35,this.setPopout(null);case 35:return e.next=37,this.go("top");case 37:m<0&&this.setSnackbar("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0430\u0448\u0443 \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u0432 \u0442\u043e\u043f\u0435. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0447\u0435\u0440\u0435\u0437 \u043c\u0438\u043d\u0443\u0442\u0443."),console.log("TOP",t.response),e.next=42;break;case 41:throw new Error("Response false");case 42:e.next=50;break;case 44:return e.prev=44,e.t1=e.catch(1),e.next=48,this.setPopout(null);case 48:this.setSnackar("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0442\u043e\u043f\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."),console.error("ERROR GET TOP",e.t1);case 50:case"end":return e.stop()}}),e,this,[[1,44],[14,18,22,30],[23,,25,29]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.vk_user,r=t.need_panel_upload_photo,o=t.analyze,s=t.snackbar,c=t.regDate,i=t.maxViews,l=t.friends_data,p=t.top;return u.a.createElement(f.i,L.bind(this)(),u.a.createElement(f.f,{id:"main"},u.a.createElement(Ve,{className:"top-rect"}),u.a.createElement(He,{className:"bottom-rect"}),u.a.createElement("div",{className:"title",style:{background:"url(".concat(n(422),") no-repeat 100%")}},u.a.createElement("h1",null,"\u0442\u044b \u043f\u043e\u043f\u0430\u043b"),u.a.createElement("h1",null,"\u0432 \u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440")),u.a.createElement("h1",{className:"right-rect"},"\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"),u.a.createElement("div",{className:"text",style:{background:"url(".concat(n(423),") no-repeat 100%")}},u.a.createElement("p",null,"\u041c\u044b \u0440\u0430\u0441\u0441\u043a\u0430\u0436\u0435\u043c \u0442\u0435\u0431\u0435 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0431\u044b\u043b\u043e \u0433\u043e\u0441\u0442\u0435\u0439 \u043d\u0430 \u0442\u0432\u043e\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0437\u0430 \u0432\u0441\u044e \u0435\u0451 \u0438\u0441\u0442\u043e\u0440\u0438\u044e"),u.a.createElement("div",{style:{display:r?"flex":"none"}},u.a.createElement("input",{type:"checkbox",id:"save_album",defaultChecked:!0,onChange:function(t){e.setState({user_save_photo_album:t.target.checked})}}),u.a.createElement("label",{htmlFor:"save_album"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432 \u0430\u043b\u044c\u0431\u043e\u043c"))),u.a.createElement("div",{className:"bottom-container"},u.a.createElement("p",null,"\u0416\u043c\u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u044f \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0430 ",u.a.createElement("span",null,"\u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0442\u0432\u043e\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435")),u.a.createElement("div",{className:"button",style:{background:"url(".concat(n(424),") no-repeat 100%")},onClick:Object(x.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,ue("photos,friends",!0);case 3:return t.t1=t.sent,t.t2={token:t.t1},t.next=7,t.t0.setState.call(t.t0,t.t2);case 7:return t.next=9,e.go("analyze");case 9:setTimeout((function(){return e.analyze()}),1e3);case 10:case"end":return t.stop()}}),t)})))},"\u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c")),u.a.createElement("img",{alt:"bg",className:"bg",src:n(425)}),s),u.a.createElement(f.f,{id:"analyze"},u.a.createElement(Ve,{className:"top-rect"}),u.a.createElement(He,{className:"bottom-rect",style:{bottom:o&&-86}}),u.a.createElement("div",{className:"title",style:{background:"url(".concat(n(426),") no-repeat 100%")}},u.a.createElement("h1",null,"\u0430\u043d\u0430\u043b\u0438\u0437"),u.a.createElement("h1",null,o?"\u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435...":"\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d")),u.a.createElement("h1",{className:"right-rect"},"\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"),u.a.createElement("div",{className:"progress"},u.a.createElement("h1",{ref:function(t){return e.percentRef=t}},"0%"),u.a.createElement(Je,{percent:this.percentRef?parseInt(this.percentRef.innerText):0})),u.a.createElement("div",{className:"text",style:{background:"url(".concat(n(427),") no-repeat 100%"),opacity:o?0:1}},u.a.createElement("p",null,"\u041f\u043e\u043c\u0438\u043c\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0442\u0432\u043e\u0438\u0445 \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0435\u0439 \u044f \u043c\u043e\u0433\u0443 \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u0442\u043e\u043c, \u043a\u0430\u043a\u0438\u0435 ",a&&1===a.sex?"\u043f\u0430\u0440\u043d\u0438":"\u0434\u0435\u0432\u0443\u0448\u043a\u0438"," \u0442\u043e\u0431\u043e\u0439 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0442\u0441\u044f.",u.a.createElement("br",null),"\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0436\u043c\u0438 \xab\u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c\xbb")),u.a.createElement("div",{className:"button",style:{background:"url(".concat(n(428),") no-repeat 100%"),opacity:o?0:1},onClick:this.goResult},"\u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c"),u.a.createElement("div",{className:"button2",style:{opacity:o?0:1},onClick:this.goResult},"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"),u.a.createElement("img",{alt:"bg",className:"bg",src:n(429)})),u.a.createElement(f.f,{id:"result"},u.a.createElement(Ve,{className:"top-rect"}),u.a.createElement(He,{className:"bottom-rect"}),u.a.createElement("div",{className:"title",style:{background:"url(".concat(n(430),") no-repeat 100%")}},u.a.createElement("p",null,"\u0417\u0430 \u043f\u0435\u0440\u0438\u043e\u0434:"),u.a.createElement("h3",null,"\u0441 ",c?new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"numeric",year:"numeric"}):""," \u043f\u043e ",(new Date).toLocaleDateString("ru-RU",{day:"numeric",month:"numeric",year:"numeric"})),u.a.createElement("p",null,"\u0422\u0432\u043e\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u043e\u0441\u0435\u0442\u0438\u043b\u0438 \u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e:")),u.a.createElement("div",{className:"text",style:{background:"url(".concat(n(431),") no-repeat 100%")}},i&&u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,D(i)),u.a.createElement("p",null,V(i,["\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"],!1)))),u.a.createElement("div",{className:"text2",style:{background:"url(".concat(n(432),") no-repeat 100%")}},u.a.createElement(Ye,{values:[l.men,l.woman]}),u.a.createElement("p",null,l.men,"%",u.a.createElement("p",null,"\u043c\u0443\u0436\u0447\u0438\u043d")),u.a.createElement("p",null,l.woman,"%",u.a.createElement("p",null,"\u0436\u0435\u043d\u0449\u0438\u043d"))),u.a.createElement("div",{className:"bottom-container"},u.a.createElement("div",{className:"button",style:{background:"url(".concat(n(433),") no-repeat 100%")},onClick:this.goTop},u.a.createElement(We,null),u.a.createElement("p",null,"\u0442\u043e\u043f")),u.a.createElement("div",{className:"button",style:{background:"url(".concat(n(434),") no-repeat 100%")},onClick:function(){e.shareStory()}},u.a.createElement("p",null,"\u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"),u.a.createElement("p",null,"\u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"))),u.a.createElement("h1",{className:"right-rect"},"\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"),u.a.createElement("img",{alt:"bg",className:"bg",src:n(435)}),s),u.a.createElement(f.f,{id:"top"},u.a.createElement(Ve,{className:"top-rect"}),u.a.createElement(He,{className:"bottom-rect"}),u.a.createElement("div",{className:"title",style:{background:"url(".concat(n(436),") no-repeat 100%")}},u.a.createElement("h1",null,"\u0442\u043e\u043f"),u.a.createElement("h1",null,"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")),u.a.createElement("h1",{className:"right-rect"},"\u0430\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"),u.a.createElement("div",{className:"user-rate",style:{background:"url(".concat(n(437),") no-repeat 100%")}},u.a.createElement("img",{alt:"avatar",src:a&&a.photo_100}),u.a.createElement("div",null,a&&u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,a.first_name," ",a.last_name),u.a.createElement("p",null,D(i)," ",V(i,["\u0433\u043e\u0441\u0442\u044c","\u0433\u043e\u0441\u0442\u044f","\u0433\u043e\u0441\u0442\u0435\u0439"],!1)))),u.a.createElement("div",{style:{opacity:!(p&&p.current>-1)&&0}},u.a.createElement("p",null,p&&p.current+1),u.a.createElement("p",null,"\u043c\u0435\u0441\u0442\u043e"))),u.a.createElement("div",{className:"users-rate"},p&&p.users_sort.filter((function(e){return p.users_data[e[0]]&&e[0]!=a.id})).map((function(e,t){return u.a.createElement("div",{key:"user-".concat(t),style:{background:"url(".concat(n(438),") no-repeat 100%")}},u.a.createElement("img",{alt:"avatar",src:p.users_data[e[0]].photo_100}),u.a.createElement("div",null,u.a.createElement("p",null,p.users_data[e[0]].first_name," ",p.users_data[e[0]].last_name),u.a.createElement("p",null,D(e[1])," ",V(e[1],["\u0433\u043e\u0441\u0442\u044c","\u0433\u043e\u0441\u0442\u044f","\u0433\u043e\u0441\u0442\u0435\u0439"],!1))),u.a.createElement("p",null,t+1))}))),u.a.createElement("div",{className:"shadow"}),u.a.createElement("div",{className:"button",style:{background:"url(".concat(n(439),") no-repeat 100%")},onClick:function(){e.back()}},"\u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"),u.a.createElement("img",{alt:"bg",className:"bg",src:n(440)}),s))}}]),t}(u.a.Component),$e=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.subscribe((function(t){var n=t.detail,a=n.type,r=n.data;"VKWebAppUpdateConfig"===a&&e.setState({appearance:r.appearance})}))}},{key:"render",value:function(){return u.a.createElement(f.d,{webviewType:f.j.INTERNAL,appearance:this.state.appearance},u.a.createElement(f.a,null,u.a.createElement(f.c,null,u.a.createElement(qe,null))))}}]),t}(u.a.Component);p.a.render(u.a.createElement($e,null),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.2fdfe841.chunk.js.map